{"version":3,"sources":["index.js"],"names":["app","port","process","env","PORT","use","express","json","get","req","res","ok","post","auth","userId","sessionId","status","error","message","console","listen","log"],"mappings":";;AAKA;;AACA;;AACA;;AACA;;;;AARA;AACA;AACA;AACA;AAOA,IAAMA,GAAG,GAAG,0BAAZ;AACA,IAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC,C,CAEA;;AACAJ,GAAG,CAACK,GAAJ,CAAQ,uBAAR;AACAL,GAAG,CAACK,GAAJ,CAAQC,oBAAQC,IAAR,EAAR,E,CAEA;;AACAP,GAAG,CAACQ,GAAJ,CAAQ,SAAR,EAAmB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC/BA,EAAAA,GAAG,CAACH,IAAJ,CAAS;AAAEI,IAAAA,EAAE,EAAE;AAAN,GAAT;AACD,CAFD,E,CAIA;;AACAX,GAAG,CAACY,IAAJ,CAAS,aAAT,EAAwB,yCAAxB,EAAgD,iBAAOH,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAEdD,GAAG,CAACI,IAAJ,IAAY,EAFE,EAEpCC,MAFoC,QAEpCA,MAFoC,EAE5BC,SAF4B,QAE5BA,SAF4B;;AAAA,cAIvCD,MAJuC;AAAA;AAAA;AAAA;;AAAA,2CAKnCJ,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBT,IAAhB,CAAqB;AAAEU,YAAAA,KAAK,EAAE;AAAT,WAArB,CALmC;;AAAA;AAAA,2CAUrCP,GAAG,CAACH,IAAJ,CAAS;AACdO,YAAAA,MAAM,EAANA,MADc;AAEdC,YAAAA,SAAS,EAATA,SAFc;AAGdG,YAAAA,OAAO,EAAE;AAHK,WAAT,CAVqC;;AAAA;AAAA;AAAA;AAgB5CC,UAAAA,OAAO,CAACF,KAAR,CAAc,yBAAd;AAhB4C,2CAiBrCP,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBT,IAAhB,CAAqB;AAAEU,YAAAA,KAAK,EAAE;AAAT,WAArB,CAjBqC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAhD,E,CAqBA;;AACAjB,GAAG,CAACoB,MAAJ,CAAWnB,IAAX,EAAiB,YAAM;AACrBkB,EAAAA,OAAO,CAACE,GAAR,iDAAqDpB,IAArD;AACD,CAFD","sourcesContent":["// server/index.js\n// ä¸€ä¸ªæœ€ç®€ç‰ˆçš„ Express + Clerk åŽç«¯ï¼Œåªåšä¸¤ä»¶äº‹ï¼š\n// 1) æä¾› /health ç”¨æ¥æµ‹è¯•åŽç«¯æœ‰æ²¡æœ‰è·‘èµ·æ¥\n// 2) æä¾› /users/syncï¼Œç”¨ Clerk éªŒè¯ Authorization é‡Œçš„ token\n\nimport 'dotenv/config';\nimport express from 'express';\nimport cors from 'cors';\nimport { ClerkExpressWithAuth } from '@clerk/clerk-sdk-node';\n\nconst app = express();\nconst port = process.env.PORT || 4000;\n\n// å…è®¸å‰ç«¯ï¼ˆExpoï¼‰è®¿é—®\napp.use(cors());\napp.use(express.json());\n\n// å¥åº·æ£€æŸ¥ï¼šæµè§ˆå™¨æ‰“å¼€ http://localhost:4000/health çœ‹çœ‹\napp.get('/health', (req, res) => {\n  res.json({ ok: true });\n});\n\n// åŒæ­¥ç”¨æˆ·ä¿¡æ¯ï¼ˆå‰ç«¯ sign-in / sign-up æˆåŠŸåŽä¼šè°ƒç”¨è¿™é‡Œï¼‰\napp.post('/users/sync', ClerkExpressWithAuth(), async (req, res) => {\n  try {\n    const { userId, sessionId } = req.auth || {};\n\n    if (!userId) {\n      return res.status(401).json({ error: 'Unauthenticated' });\n    }\n\n    // TODO: è¿™é‡Œå¯ä»¥æ ¹æ® userId åŽ» Clerk æ‹¿ç”¨æˆ·ä¿¡æ¯ï¼Œå†å†™å…¥ Neon æ•°æ®åº“\n    // ç›®å‰å…ˆç®€å•è¿”å›ž userId / sessionIdï¼Œç¡®è®¤é“¾è·¯æ˜¯é€šçš„\n    return res.json({\n      userId,\n      sessionId,\n      message: 'User sync placeholder â€“ backend is working ðŸŽ‰',\n    });\n  } catch (err) {\n    console.error('[BE] /users/sync error:', err);\n    return res.status(500).json({ error: 'Internal server error' });\n  }\n});\n\n// å¯åŠ¨æœåŠ¡å™¨\napp.listen(port, () => {\n  console.log(`Backend listening on http://localhost:${port}`);\n});\n\n\n\n\n"],"file":"index.dev.js"}