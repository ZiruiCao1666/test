{"version":3,"sources":["index.js"],"names":["require","_express","_interopRequireDefault","_cors","_clerkSdkNode","app","port","process","env","PORT","use","express","json","get","req","res","ok","ClerkExpressWithAuth","_ref","userId","sessionId","regeneratorRuntime","async","_context","prev","next","auth","abrupt","status","error","message","t0","console","stop","listen","log","concat"],"mappings":"aAKAA,QAAA,iBAEA,IAAAC,SAAAC,uBAAAF,QAAA,YAAAG,MAAAD,uBAAAF,QAAA,SACAI,cAAAJ,QAAA,iGAEA,IAAMK,KAAM,EAAAJ,SAAA,WACNK,KAAOC,QAAQC,IAAIC,MAAQ,IATjCJ,IAAAK,KAAA,EAAAP,MAAA,YACAE,IAAAK,IAAAC,SAAAA,QAAAC,QAeAP,IAAIQ,IAAI,UAAW,SAACC,EAAKC,GAJzBV,EAAIK,KAAI,CAAAM,IAAA,MAKND,IAAAA,KAAIH,eAAK,EAAAR,cAAAa,wBAAA,SAAAH,EAAAC,GAAA,IAAAG,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,GAAAF,EAAAC,KAAA,EAAAN,EAATJ,EAAAY,MAAA,GAAAN,EAASF,EAATE,UAAAD,EAASD,EAATC,OAAS,CAAAI,EAAAE,KAAA,EAAA,MAAA,OAAAF,EAAAI,OAAA,SAIFZ,EAAAa,OAAe,KAAAhB,KAAA,CAAAiB,MAAA,qBAJb,KAAA,EAAA,OAAAN,EAAAI,OAAA,SAIqCZ,EAAAH,KAAA,CAAAO,OAAAA,EAAAC,UAAAA,EAAAU,QAAA,mDAJrC,KAAA,EAAA,OAAAP,EAAAC,KAAA,EAAAD,EAAAQ,GAAAR,EAAA,MAAA,GAIqCS,QAAAH,MAAA,0BAAAN,EAAAQ,IAJrCR,EAAAI,OAAA,SAIqCZ,EAAAa,OAAA,KAAAhB,KAAA,CAAAiB,MAAA,2BAJrC,KAAA,GAAA,IAAA,MAAA,OAAAN,EAAAU,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,OASuB5B,IAAA6B,OAArB5B,KALmC,WAuB9C0B,QAAQG,IAAR,yCAAAC,OAAqD9B","file":"index.min.js","sourcesContent":["// server/index.js\n// ä¸€ä¸ªæœ€ç®€ç‰ˆçš„ Express + Clerk åŽç«¯ï¼Œåªåšä¸¤ä»¶äº‹ï¼š\n// 1) æä¾› /health ç”¨æ¥æµ‹è¯•åŽç«¯æœ‰æ²¡æœ‰è·‘èµ·æ¥\n// 2) æä¾› /users/syncï¼Œç”¨ Clerk éªŒè¯ Authorization é‡Œçš„ token\n\nimport 'dotenv/config';\nimport express from 'express';\nimport cors from 'cors';\nimport { ClerkExpressWithAuth } from '@clerk/clerk-sdk-node';\n\nconst app = express();\nconst port = process.env.PORT || 4000;\n\n// å…è®¸å‰ç«¯ï¼ˆExpoï¼‰è®¿é—®\napp.use(cors());\napp.use(express.json());\n\n// å¥åº·æ£€æŸ¥ï¼šæµè§ˆå™¨æ‰“å¼€ http://localhost:4000/health çœ‹çœ‹\napp.get('/health', (req, res) => {\n  res.json({ ok: true });\n});\n\n// åŒæ­¥ç”¨æˆ·ä¿¡æ¯ï¼ˆå‰ç«¯ sign-in / sign-up æˆåŠŸåŽä¼šè°ƒç”¨è¿™é‡Œï¼‰\napp.post('/users/sync', ClerkExpressWithAuth(), async (req, res) => {\n  try {\n    const { userId, sessionId } = req.auth || {};\n\n    if (!userId) {\n      return res.status(401).json({ error: 'Unauthenticated' });\n    }\n\n    // TODO: è¿™é‡Œå¯ä»¥æ ¹æ® userId åŽ» Clerk æ‹¿ç”¨æˆ·ä¿¡æ¯ï¼Œå†å†™å…¥ Neon æ•°æ®åº“\n    // ç›®å‰å…ˆç®€å•è¿”å›ž userId / sessionIdï¼Œç¡®è®¤é“¾è·¯æ˜¯é€šçš„\n    return res.json({\n      userId,\n      sessionId,\n      message: 'User sync placeholder â€“ backend is working ðŸŽ‰',\n    });\n  } catch (err) {\n    console.error('[BE] /users/sync error:', err);\n    return res.status(500).json({ error: 'Internal server error' });\n  }\n});\n\n// å¯åŠ¨æœåŠ¡å™¨\napp.listen(port, () => {\n  console.log(`Backend listening on http://localhost:${port}`);\n});\n\n\n\n\n"]}